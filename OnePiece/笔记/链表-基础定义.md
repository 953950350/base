# 链表

## 链表与数组的区别

1. 从底层的存储结构上看，数组需要一块连续的内存空间来存储，对内存要求比较高。而链表恰好相反，并不需要一块连续的内存空间，它通过指针将一块零散的内存块串联起来使用。

2. 与数组一样，链表也支持数据的查找、插入和删除操作。数组的插入、删除操作时，为了保持内存数据的连续性，需要做大量的数据搬移，所以时间复杂度是O(n)。而在链表中插入或删除一个数据，我们并不需要为了保持内存的连续性而搬移结点，因为链表的存储空间本身就不是连续的。所以在链表中插入和删除一个数据非常快速。

3. 但是链表在访问第K个元素时就没有数组那么高效了，因为链表中的数据不是连续存储的，所以无法像数组那样，根据首地址和下标，通过寻址公式直接计算出对应的内存地址，而是需要根据指针一个结点一个结点一次遍历，直到找到对应的结点，所以链表的访问性能需要O(n)的时间复杂度。

## 链表分类

1. 单链表

最常见的一种链表，通过next连接链表的下一个元素，最后一个元素next属性为null。

2. 循环链表

循环链表是一种特殊的单链表，和单链表唯一的区别就是在尾结点，单链表的尾结点指针指向空地址，循环链表尾结点指针指向链表头结点。

与单链表相比，循环链表的优点是从链尾到链头比较方便。当要处理的数据有环型结构特点时，就适合采用循环链表。比如约瑟夫问题。

3. 双向链表

单链表只有一个方向，结点只有一个后继指针next指向后面的结点。而双向链表支持两个方向，每个结点不止有一个后继指针next指向后面的结点，还有一个前驱指针prev指向前面的结点。

从结构上来看，双向链表可以支持O(1)时间复杂度的情况下找到前驱结点，使得双向链表在某些情况下的插入、删除等操作都要比单链表简单、高效。

对于从链表中删除一个数据，一般就是这两种情况：

- 删除结点中"值等于某个给定值"的结点；
- 删除给定指针指向的结点。

第一种情况无论是单向链表还是双向链表都需要一个个遍历对比，找到给定值的结点，然后删除，虽然删除操作是O(1)，但是查找操作的事件复杂度是O(n)。

对于第二种情况，我们已经有了需要删除的结点，但是删除某个节点需要知道其前驱结点，而单链表并不支持直接获取前驱结点，所以需要遍历查找前驱结点，而双向链表就不需要。

4. 双向循环链表

就是将头尾连接起来的双向链表。

## 链表与数组性能对比

数组简单易用，在实现上使用的是连续的内存空间，可以借助CPU缓存机制，预读数组中的数据，所以访问效率高。而链表在内存中并不是连续存储，所以对CPU缓存不友好。

数组的缺点就是大小固定，一声明就要占据一整块连续内存空间。如果声明数组过大，系统可能没有足够连续内存空间分配给它，导致内存不足。如果声明数组过小，则可能出现不够用的情况，就需要再申请一个更大的内存空间，把原数组拷贝进去，非常费时。链表本身没有大小限制，天然支持动态扩容。

如果代码对内存使用非常严格，那么数组更加适合，因为链表中每一个结点都需要消耗额外的存储空间去存储一份指向下一个结点的指针，所以内存消耗会翻倍。而且对链表进行频繁的插入、删除操作，还会导致频繁的内存申请和释放，容易造成内存碎片，可能导致频繁的GC。

